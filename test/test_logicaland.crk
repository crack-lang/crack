// Copyright 2010 Shannon Weyrick <weyrick@mozek.us>
// Copyright 2010-2011 Google Inc.
//
//   This Source Code Form is subject to the terms of the Mozilla Public
//   License, v. 2.0. If a copy of the MPL was not distributed with this
//   file, You can obtain one at http://mozilla.org/MPL/2.0/.
//

int s = 0;

// basic
if (1 && 0)
 puts("failed");

if (1 && 1)
 s = 1;

if (s != 1)
 puts("fail");

if (0 && 1)
 puts("failed");

if (1 && (1 && 0))
 puts("failed");

if (1 && (0 && 1))
 puts("failed");

if (1 && (1 && 1))
 s = 2;
if (s != 2)
 puts("fail");

int a = 0;
if (1 && (a = 5))
 s = 3;
if (s != 3)
 puts("fail");

// side effects
if (0 && (a = 10))
 puts("failed");

if (a == 10)
 puts("failed");
if (a == 5)
 s = 4;
if (s != 4)
 puts("fail");

// precedence
int b = 0;
if (a && b == 0)
 s = 5;
else
 puts("failed");

if (s != 5)
 puts("fail");

a = 1;
b = 1;
int c = 0;
if (a && b && c)
 s = 6;

if (s == 6)
 puts("fail");


c=1;
int d=1;
if (a && b && c && d)
 s = 7;

if (s != 7)
 puts("fail");

class Foo { oper release() {} oper to bool() { return 1==0; } }
if ((1) && (Foo()))
 puts('fail');

puts("ok");
