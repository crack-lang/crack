# Copyright 2013 Conrad Steenberg <conrad.steenberg@gmail.com>
#
#   This Source Code Form is subject to the terms of the Mozilla Public
#   License, v. 2.0. If a copy of the MPL was not distributed with this
#   file, You can obtain one at http://mozilla.org/MPL/2.0/.
#
# test random numbers

import crack.cont.numericarray NumericVector;
import crack.io cout;
import crack.random MersenneTwister, uuid;
import crack.runtime exit;

mt := MersenneTwister(uint(3574097475));

na := mt.get(625);
expected := NumericVector[uint]![
    3542857284, 3808373109, 743890126, 2546138997, 1756061767, 2725027797,
    927598310, 1235023073, 1854885191, 3893843736, 3162164390, 879830743,
    345514652, 793463938, 1448136426, 2819824904, 4250819547, 1473162144,
    2078954585, 3796050154, 163317782, 3301394387, 3025055565, 2736062622,
    2263309905, 489664156, 612769902, 304844336, 2155715463, 3771707834,
    2940534676, 2978911229, 825783478, 3406163491, 336463834, 1078501725,
    2660609185, 2423390361, 1170524262, 1794732584, 341523671, 1215706288,
    3691392655, 3723716110, 772542914, 1986813897, 1503487217, 1424278011,
    1652249339, 2420900662, 1026016740, 3684086745, 785392363, 2342761629,
    3289070775, 1471798910, 747979384, 3311336815, 827102905, 1881514616,
    2423220588, 3751772023, 1623901865, 1911853164, 978610263, 80006449,
    2393756634, 1290704634, 177991129, 2188387026, 389947285, 3691137361,
    3749557569, 1420621428, 1854811931, 4211830423, 4027488843, 920286972,
    1305612823, 1008746251, 2921031781, 1769750266, 1285948387, 679001788,
    81825528, 1220475191, 1105448642, 66615410, 2328272286, 1973563069,
    1619346002, 164991128, 419421875, 2978433388, 1762553207, 3949511239,
    2913808720, 2287318364, 3601367485, 4158155324, 855514659, 2437446611,
    4163293353, 1101494761, 1115010020, 3159074071, 1608288540, 4042860432,
    129559022, 54267292, 3139848561, 2826937922, 899662545, 3443609240,
    1140702793, 3081637345, 3408829954, 2368970364, 738683023, 3708681566,
    2978567681, 4191532223, 1401328934, 173587451, 1539111604, 2742384967,
    1198480461, 62590988, 1254711741, 479459408, 1167592375, 1107177000,
    2518360227, 1621126506, 2975925767, 2096302195, 2017599182, 1411930429,
    4269673227, 381547862, 964752138, 2126963895, 3485957841, 366669747,
    3375901972, 542203514, 3020625568, 3067306341, 2935809316, 30994226,
    1767059206, 856639964, 2922069349, 1315069514, 497466854, 4042667609,
    1848111165, 157252115, 3419502079, 4073587881, 4166920963, 3694303947,
    1256628210, 4184156696, 3451143087, 487107440, 2803618581, 101872491,
    1649171494, 3241452373, 4055834089, 1436813760, 1306760576, 3234959860,
    4142131109, 1462581189, 2814417172, 3894352133, 3143934654, 1386750105,
    3437165780, 2906364169, 3523008301, 3858999866, 1115327948, 2135544715,
    988440407, 3147416866, 2766164020, 859349037, 1023989885, 2369950316,
    184692797, 1752587160, 2430646696, 1412526152, 1884239013, 1911560798,
    591065630, 3590479426, 329758598, 2566221173, 2007827700, 2392566731,
    4243973387, 1707059150, 2177994232, 3556472190, 3081101144, 1809001104,
    3415828175, 2356920402, 3457089313, 3260249103, 3431329751, 4047906763,
    3496059365, 3423439710, 202867685, 2082563034, 2658240893, 3653675616,
    3983720629, 2251665939, 1440427446, 3200636820, 2094412365, 2637885084,
    3082149106, 415384914, 2952330826, 1319761308, 1824482530, 2139994976,
    753516157, 288832766, 3722023633, 2487075407, 4151561121, 670887194,
    2474902537, 366241218, 1540143465, 3334742484, 4273516735, 745281832,
    3623291726, 1790330500, 2193897829, 909004724, 78084369, 4216295023,
    481302317, 2340446629, 1705320731, 347807840, 3958478181, 888590531,
    2644586219, 1716752323, 2623494582, 3968678128, 2586121468, 1666313722,
    801043670, 3650011783, 261926355, 3314575876, 1387921713, 976773370,
    2376003676, 2341242280, 366077615, 412839656, 2352365667, 2341166342,
    49968712, 1267992676, 1126314273, 2371591349, 1487398802, 3173480398,
    2109865441, 1107425481, 4086636888, 2928253556, 3199945758, 1703775663,
    1811382684, 2626354754, 2556925358, 3218820145, 389673220, 4113062743,
    4244304401, 1381709988, 723199919, 1222030493, 1697436144, 3138732649,
    1642008356, 2827364989, 2005952167, 356590747, 3899367107, 2354545449,
    1937577805, 4074708215, 3732707337, 3685762584, 4119946650, 3568858315,
    1975891888, 1665126877, 1272992887, 2154001739, 4141797014, 304407094,
    45922733, 96415829, 2196495864, 2191367919, 3452627544, 1233442029,
    1429008514, 3561812081, 3825187853, 2989858348, 3292323969, 2546084348,
    2167260520, 2437355150, 902266482, 3319462556, 2543728779, 2444207086,
    3115987546, 3136063333, 2505725719, 134964314, 2286576928, 2476686782,
    880095617, 2042144400, 1584635127, 2527179836, 2650362097, 2505599609,
    2902317910, 3098964162, 3197696564, 4016050764, 161714926, 598894720,
    2758698129, 2291854879, 800623077, 2542090407, 49660278, 3741095988,
    2510489594, 1269833918, 2255881895, 214138887, 1290946062, 2682422501,
    1336912563, 1777700543, 561499015, 2642096550, 742788785, 720577063,
    581185930, 172799118, 251485853, 2892226048, 1135568338, 3931511941,
    1532015244, 3569248841, 3008175210, 3217903414, 2376133737, 2921440908,
    406184892, 2744330712, 4074928578, 23050362, 2866492813, 307558060,
    10948474, 1420752186, 1353323492, 2964541275, 680949296, 2371222922,
    1072510804, 1195225682, 356647378, 630492969, 2544869289, 2040214275,
    1260010661, 1190752280, 3449776515, 4197601186, 1859332668, 1295039591,
    394398782, 327622276, 1990650595, 2793827084, 3799569196, 284696258,
    3331651714, 3986488537, 3699851246, 2196331232, 2131400193, 2838854343,
    1965403369, 2961998076, 1804892918, 1767859133, 3805361431, 3769029530,
    2346211301, 3970113576, 27214328, 4167670158, 773386706, 1569038058,
    1309113409, 997264248, 1217338214, 3445810733, 2849224777, 2294828906,
    317657331, 3209014998, 1508236390, 4240746221, 1354425237, 1569058525,
    391347660, 2657563193, 3957958886, 3782837432, 1404781261, 3842742093,
    960449740, 2001455621, 1081843592, 2683544899, 2975938934, 567393940,
    1682482123, 1221353548, 850667058, 3983827930, 3756312653, 2413506595,
    200458962, 1710844829, 1468984461, 833343073, 1611948020, 2388179163,
    3537792167, 3491248023, 113752619, 3388907746, 1720050371, 404540429,
    2096249096, 3559876976, 560159440, 2214737948, 101650433, 4075329813,
    1117804525, 737154052, 955182536, 3915841006, 2294377237, 1211522354,
    2084895313, 1836384834, 1760522667, 1978028955, 116638710, 1495969975,
    34784182, 3512204244, 1451406084, 1541711514, 2618791388, 147389416,
    2471250139, 2124523964, 1212644388, 3556148676, 633589192, 4081035635,
    806973445, 4215417731, 3777463846, 1978485421, 3716345528, 217652848,
    361197939, 1181463648, 3147155276, 2761348759, 1241807905, 2358180800,
    1543370996, 2157331566, 899693237, 316788379, 2575458112, 4187223124,
    4090329957, 1150612329, 433564472, 4007469705, 1146282540, 2532440560,
    2425445675, 2398993675, 199549133, 3668630503, 98747533, 1721291090,
    3147535781, 649629589, 2611351702, 1808882710, 3561017251, 2169419742,
    537911535, 3356932351, 412846603, 2116986216, 3720664346, 2112002999,
    1099564114, 2309758787, 2972130047, 2119466752, 182941380, 2543268034,
    3678502515, 2022753006, 2890399076, 1240925902, 1110304596, 4164452223,
    426484890, 266967182, 4150010995, 193997541, 1613810005, 2357720717,
    505385159, 3307133924, 3648793391, 728655388, 1217401725, 1023022415,
    624226367, 2294742139, 1032309167, 376970400, 2948468062, 1530202331,
    2679793115, 3687902293, 4207343461, 1643559765, 4163623329, 26775491,
    1805990247, 249430818, 1568770405, 1574007173, 4221941696, 1497996271,
    711030124, 1854067027, 711866433, 1323131880, 2892285439, 1844753407,
    2800299798, 3373956929, 403062156, 1359365883, 2724311061, 1067828248,
    152556181, 2830497731, 3814322199, 1999782152, 140057412, 3671760413,
    495514800, 3811871622, 4270857925, 3561865962, 3439993968, 1728616023,
    2275587057, 4121552254, 3100566834, 1450347411, 2152706626, 2202080046,
    1398235069, 2817626911, 2490290640, 1746510784, 2249560862, 993919982,
    448421206
];

if (na != expected || na[0] == na[624]) {
    cout `Error generating expected sequence\n`;
    exit(1);
}

u := uuid(16);

cout `ok\n`;
